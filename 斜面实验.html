<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>斜面坡度与省力关系虚拟实验</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 50%, #e8f5e8 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            padding: 40px;
            backdrop-filter: blur(10px);
        }
        
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 2.8em;
            font-weight: 300;
            letter-spacing: 1px;
        }
        
        .subtitle {
            text-align: center;
            color: #7f8c8d;
            margin-bottom: 40px;
            font-size: 1.2em;
            font-weight: 300;
        }
        
        .experiment-area {
            display: flex;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .control-panel {
            flex: 1;
            background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
            padding: 30px;
            border-radius: 15px;
            border: 1px solid #e3f2fd;
            box-shadow: 0 4px 20px rgba(0,0,0,0.05);
        }
        
        .canvas-container {
            flex: 2;
            text-align: center;
        }
        
        canvas {
            border: 2px solid #e3f2fd;
            border-radius: 12px;
            background: white;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        }
        
        .slider-container {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 12px;
            font-weight: 500;
            color: #2c3e50;
            font-size: 1.1em;
        }
        
        input[type="range"] {
            width: 100%;
            height: 10px;
            border-radius: 8px;
            background: linear-gradient(90deg, #e3f2fd 0%, #bbdefb 100%);
            outline: none;
            -webkit-appearance: none;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: linear-gradient(135deg, #42a5f5 0%, #1976d2 100%);
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(33, 150, 243, 0.4);
            border: 3px solid white;
        }
        
        input[type="range"]::-moz-range-thumb {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: linear-gradient(135deg, #42a5f5 0%, #1976d2 100%);
            cursor: pointer;
            border: 3px solid white;
            box-shadow: 0 4px 12px rgba(33, 150, 243, 0.4);
        }
        
        .angle-display {
            text-align: center;
            font-size: 1.8em;
            font-weight: 600;
            color: #1976d2;
            margin: 15px 0;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .force-display {
            background: linear-gradient(135deg, #e8f5e8 0%, #f1f8e9 100%);
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            border-left: 4px solid #4caf50;
            box-shadow: 0 2px 8px rgba(76, 175, 80, 0.2);
        }
        
        .force-value {
            font-size: 1.4em;
            font-weight: 600;
            color: #2e7d32;
        }
        
        .chart-container {
            background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
            padding: 30px;
            border-radius: 15px;
            border: 1px solid #e3f2fd;
            box-shadow: 0 4px 20px rgba(0,0,0,0.05);
        }
        
        .physics-info {
            background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
            padding: 25px;
            border-radius: 12px;
            margin: 25px 0;
            border-left: 4px solid #ff9800;
            box-shadow: 0 2px 8px rgba(255, 152, 0, 0.2);
        }
        
        .physics-info h3 {
            margin-top: 0;
            color: #e65100;
            font-weight: 600;
            font-size: 1.2em;
        }
        
        .physics-info p {
            margin: 8px 0;
            color: #bf360c;
            line-height: 1.5;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>斜面坡度与省力关系虚拟实验</h1>
        <p class="subtitle">探索斜面与地面夹角如何影响斜面长度和提升重物所需的拉力</p>
        
        <div class="experiment-area">
            <div class="control-panel">
                <div class="slider-container">
                    <label for="angleSlider">斜面与地面夹角 (度):</label>
                    <input type="range" id="angleSlider" min="0" max="45" value="0" step="1">
                    <div class="angle-display" id="angleDisplay">0°</div>
                </div>
                
                <div class="force-display">
                    <div>沿斜面向上的拉力:</div>
                    <div class="force-value" id="forceDisplay">0.00 N</div>
                </div>
                
                <div class="physics-info">
                    <h3>物理原理</h3>
                    <p>木块重量: 10 N</p>
                    <p>斜面高度: 固定不变</p>
                    <p>斜面角度: θ (与地面的夹角)</p>
                    <p>斜面长度: L = h/sin(θ)</p>
                    <p>沿斜面向上拉力: F = mg·sin(θ)</p>
                    <p>角度越大，斜面越长，但拉力越大</p>
                </div>
            </div>
            
            <div class="canvas-container">
                <canvas id="physicsCanvas" width="600" height="350"></canvas>
                <div style="margin-top: 15px; font-size: 1.1em; color: #666;">
                    斜面受力示意图
                </div>
            </div>
        </div>
        
        <div class="chart-container">
            <h3 style="text-align: center; margin-bottom: 20px; color: #495057;">不同角度下的拉力对比</h3>
            <canvas id="forceChart" width="800" height="300"></canvas>
        </div>
    </div>

    <script>
        // 全局变量
        const angleSlider = document.getElementById('angleSlider');
        const angleDisplay = document.getElementById('angleDisplay');
        const forceDisplay = document.getElementById('forceDisplay');
        const physicsCanvas = document.getElementById('physicsCanvas');
        const ctx = physicsCanvas.getContext('2d');
        
        // 物理常量
        const mass = 1; // kg (10N = 1kg * 10m/s²)
        const gravity = 10; // m/s²
        const weight = mass * gravity; // 10N
        
        // 图表数据存储
        let chartData = [];
        
        // 初始化图表
        const chartCtx = document.getElementById('forceChart').getContext('2d');
        const forceChart = new Chart(chartCtx, {
            type: 'bar',
            data: {
                labels: [],
                datasets: [{
                    label: '所需拉力 (N)',
                    data: [],
                    backgroundColor: 'rgba(54, 162, 235, 0.8)',
                    borderColor: 'rgba(54, 162, 235, 1)',
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 10,
                        title: {
                            display: true,
                            text: '拉力 (N)'
                        }
                    },
                    x: {
                        title: {
                            display: true,
                            text: '斜面与地面夹角 (度)'
                        }
                    }
                },
                plugins: {
                    title: {
                        display: true,
                        text: '斜面与地面夹角对斜面长度和所需拉力的影响'
                    },
                    legend: {
                        display: false
                    }
                }
            }
        });
        
        // 计算拉力
        function calculateForce(angle) {
            const angleRad = angle * Math.PI / 180;
            return weight * Math.sin(angleRad);
        }
        
        // 绘制物理图
        function drawPhysics(angle) {
            ctx.clearRect(0, 0, physicsCanvas.width, physicsCanvas.height);
            
            const angleRad = angle * Math.PI / 180;
            const canvasWidth = physicsCanvas.width;
            const canvasHeight = physicsCanvas.height;
            
            // 斜面参数 - 高度固定，根据角度调整长度
            const fixedHeight = 80; // 固定高度（调整为更短）
            const margin = 60; // 边距
            
            // 计算底边长度 - 完全根据角度计算，不设上限
            let triangleBase;
            if (angle === 0) {
                triangleBase = 400; // 水平时显示一个较长的长度
            } else {
                triangleBase = fixedHeight / Math.tan(angleRad);
                // 移除长度限制，让夹角完全跟随角度变化
            }
            
            const triangleHeight = fixedHeight; // 高度固定
            
            // 三角形顶点坐标 - 左对齐显示（保持左边高度不变）
            const leftMargin = margin;
            const bottomY = canvasHeight - margin;
            const bottomLeftX = leftMargin; // 左下角 - 固定左边位置
            const bottomLeftY = bottomY; // 左下角
            const bottomRightX = bottomLeftX + triangleBase; // 右下角
            const bottomRightY = bottomY; // 右下角
            const topX = bottomLeftX; // 左上角 - 保持左边不变
            const topY = bottomY - triangleHeight; // 左上角 - 高度固定
            
            // 绘制直角三角形斜面（三条蓝色线条）
            ctx.strokeStyle = '#0066cc';
            ctx.lineWidth = 4;
            
            // 底边（水平）
            ctx.beginPath();
            ctx.moveTo(bottomLeftX, bottomLeftY);
            ctx.lineTo(bottomRightX, bottomRightY);
            ctx.stroke();
            
            // 垂直边
            ctx.beginPath();
            ctx.moveTo(bottomLeftX, bottomLeftY);
            ctx.lineTo(topX, topY);
            ctx.stroke();
            
            // 斜边
            ctx.beginPath();
            ctx.moveTo(topX, topY);
            ctx.lineTo(bottomRightX, bottomRightY);
            ctx.stroke();
            
            // 计算木块位置（平放在斜面线上）
            const blockSize = 24;
            const rampProgress = 0.7; // 木块在斜面上的位置（0.7表示在上部）
            
            // 计算木块在斜面上的位置
            const blockCenterX = topX + (bottomRightX - topX) * rampProgress;
            const blockCenterY = topY + (bottomRightY - topY) * rampProgress;
            
            // 计算斜面角度和垂直偏移
            const rampAngle = Math.atan2(bottomRightY - topY, bottomRightX - topX);
            const perpendicularOffset = blockSize / 2; // 垂直于斜面向上偏移
            
            // 计算木块实际位置（向垂直斜面方向偏移，使其平放在斜面上方）
            const blockX = blockCenterX + perpendicularOffset * Math.sin(rampAngle);
            const blockY = blockCenterY - perpendicularOffset * Math.cos(rampAngle);
            
            // 保存当前状态
            ctx.save();
            
            // 移动到木块位置并旋转画布
            ctx.translate(blockX, blockY);
            ctx.rotate(rampAngle);
            
            // 绘制木块（黄色矩形，以中心为基准）
            ctx.fillStyle = '#ffcc00';
            ctx.fillRect(-blockSize/2, -blockSize/2, blockSize, blockSize);
            ctx.strokeStyle = '#cc9900';
            ctx.lineWidth = 2;
            ctx.strokeRect(-blockSize/2, -blockSize/2, blockSize, blockSize);
            
            // 恢复画布状态
            ctx.restore();
            
            // 绘制拉力矢量（红色箭头，严格与斜面平行）
            if (angle > 0) {
                const forceLength = 45;
                const forceStartX = blockX;
                const forceStartY = blockY;
                
                // 计算沿斜面向上的方向向量
                const rampDX = bottomRightX - topX;
                const rampDY = bottomRightY - topY;
                const rampLength = Math.sqrt(rampDX * rampDX + rampDY * rampDY);
                const unitDX = -rampDX / rampLength; // 负号表示向上
                const unitDY = -rampDY / rampLength; // 负号表示向上
                
                const forceEndX = forceStartX + unitDX * forceLength;
                const forceEndY = forceStartY + unitDY * forceLength;
                
                // 绘制拉力箭头
                ctx.strokeStyle = '#ff0000';
                ctx.lineWidth = 4;
                ctx.beginPath();
                ctx.moveTo(forceStartX, forceStartY);
                ctx.lineTo(forceEndX, forceEndY);
                ctx.stroke();
                
                // 绘制箭头头部
                ctx.fillStyle = '#ff0000';
                const arrowSize = 10;
                const arrowAngle1 = Math.atan2(unitDY, unitDX) + Math.PI * 0.8;
                const arrowAngle2 = Math.atan2(unitDY, unitDX) - Math.PI * 0.8;
                
                ctx.beginPath();
                ctx.moveTo(forceEndX, forceEndY);
                ctx.lineTo(forceEndX + arrowSize * Math.cos(arrowAngle1), 
                           forceEndY + arrowSize * Math.sin(arrowAngle1));
                ctx.lineTo(forceEndX + arrowSize * Math.cos(arrowAngle2), 
                           forceEndY + arrowSize * Math.sin(arrowAngle2));
                ctx.closePath();
                ctx.fill();
                
                // 添加F拉标签
                ctx.fillStyle = '#333';
                ctx.font = '14px Arial';
                ctx.fillText('F拉', forceEndX - 15, forceEndY - 10);
            }
            
            // 绘制角度标注（在右下角）
            if (angle > 0) {
                ctx.strokeStyle = '#666';
                ctx.lineWidth = 2;
                const arcRadius = 25;
                
                // 角度弧线
                ctx.beginPath();
                ctx.arc(bottomRightX, bottomRightY, arcRadius, -angleRad, 0);
                ctx.stroke();
                
                // 角度文字
                ctx.fillStyle = '#666';
                ctx.font = '16px Arial';
                ctx.fillText(`${angle}°`, bottomRightX - 40, bottomRightY - 20);
            }
        }
        
        // 更新图表数据
        function updateChart(angle, force) {
            // 检查是否已存在该角度的数据
            const existingIndex = chartData.findIndex(item => item.angle === angle);
            
            if (existingIndex !== -1) {
                chartData[existingIndex].force = force;
            } else {
                chartData.push({ angle, force });
                chartData.sort((a, b) => a.angle - b.angle);
            }
            
            // 更新图表
            forceChart.data.labels = chartData.map(item => `${item.angle}°`);
            forceChart.data.datasets[0].data = chartData.map(item => item.force.toFixed(2));
            forceChart.update();
        }
        
        // 滑块事件监听
        angleSlider.addEventListener('input', function() {
            const angle = parseFloat(this.value);
            const force = calculateForce(angle);
            
            // 更新显示
            angleDisplay.textContent = `${angle}°`;
            forceDisplay.textContent = `${force.toFixed(2)} N`;
            
            // 更新物理图
            drawPhysics(angle);
            
            // 更新图表
            updateChart(angle, force);
        });
        
        // 初始化
        drawPhysics(0);
        updateChart(0, 0);
        
        // 添加一些预设角度按钮
        const presetAngles = [10, 20, 30, 45];
        const buttonContainer = document.createElement('div');
        buttonContainer.style.marginTop = '20px';
        buttonContainer.style.textAlign = 'center';
        
        presetAngles.forEach(angle => {
            const button = document.createElement('button');
            button.textContent = `${angle}°`;
            button.style.margin = '8px';
            button.style.padding = '12px 20px';
            button.style.border = 'none';
            button.style.borderRadius = '8px';
            button.style.background = 'linear-gradient(135deg, #42a5f5 0%, #1976d2 100%)';
            button.style.color = 'white';
            button.style.cursor = 'pointer';
            button.style.fontSize = '14px';
            button.style.fontWeight = '500';
            button.style.boxShadow = '0 4px 12px rgba(33, 150, 243, 0.3)';
            button.style.transition = 'all 0.3s ease';
            
            // 添加悬停效果
            button.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-2px)';
                this.style.boxShadow = '0 6px 16px rgba(33, 150, 243, 0.4)';
            });
            
            button.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0)';
                this.style.boxShadow = '0 4px 12px rgba(33, 150, 243, 0.3)';
            });
            
            button.addEventListener('click', () => {
                angleSlider.value = angle;
                angleSlider.dispatchEvent(new Event('input'));
            });
            
            buttonContainer.appendChild(button);
        });
        
        document.querySelector('.control-panel').appendChild(buttonContainer);
    </script>
</body>
</html>
